---
chapter_no: 20
chapter_title: Rustのメモ
created: 2022-10-03
updated: 2022-10-03
---
### キーワード
- Rustの特徴
- 環境構築
- 基本的な型、変数の扱い、束縛
  - 型：
    - 数値、リテラル、浮動小数点数、論理値、文字型
  - 複合型：
    - タプル、配列型
  - 参照と借用：
    - 所有権の移動、借用
  - 束縛：
    - 束縛と可変変数、シャドーイング
  - スコープ：
    - ブロック単位、関数単位、構造体単位、クロージャ単位

- 文字列
  - 文字：
    - 文字を扱う、特殊文字、u8型へのキャスト
  - 文字列：
    - 文字列の扱い、アルファベットの操作、
    - 日本語の扱い、日本語を正しく扱う
  - 文字列スライス：
    - 先頭を切り出すスライス、途中の文字列を切り出すスライス、
    - 最後まで切り出すスライス、全体を切り出すスライス

- 文と式と関数
  - 文と式：
    - 文、式
- 演算子：
  - 四則演算子、代入演算子、ビット演算子、シフト演算子、論理演算子、単項演算子
- 関数：
  - 引数のない関数、引数のある関数、戻り値のある関数、
  - 文字列を受け取る関数、文字列を戻す関数、
  - ベクターを受け取る関数、ベクターを戻す関数、ベクターの中身を変更する関数
- 制御文とパターンマッチ
- 配列とベクター
- 構造体とメソッド
- ジェネリクスとトレイト
- 所有権
- パッケージの作成
- ファイル入出力
- マクロ
- Web API呼び出し
- データベースアクセス
- C言語ライブラリの呼び出し
- クロージャ
- 並列化
- テストコード
- 付録A　Rustのメモリ配置を調べる
- 付録B　Rustの型を調べる

### 型推論
- Rustの場合は型推論させるのが一般的。
- 型推論させた変数の使用例
```
fn main() {
    let name = "fumo";
    let age = 40;
}
```
- 型を宣言しておきたいときは `:`の後に変数の型を書く。
```
fn main() {
    let name {em{: &str}em} = "fumo";
    let age {em{: i32}em} = 40;
}
```
- 文字列の型は`&str`。
- 数値の場合は主に`i32`を使う。`i32`は整数(integer)の32ビット版。
- 最近のパソコンでは64ビットが主流なので`i64`でもOK。
- 変数だけの時は型を指定する必要はない。(型推論でOK)
- しかし、関数を作成する場合は型の指定が必須になる。

```
fn add(x: {em{i32}em}, y: {em{i32}em}) -> {em{i32}em} {
    x + y
}
```
- `fn`は関数宣言の印。
- add関数は引数xと引数yの2つを受け取って、加算して返すという簡単なもの。
- `->`が関数の戻り値。

- 戻り値の型は関数の中で使われている計算結果の型と一致させなくてはならない。
```:コンパイルエラー
fn add(x: {em{i32}em}, y: {em{i32}em}) -> {em:blue{i64}em} {
    x + y
}
```
- 戻り値の型で指定した`i64`が間違っているためコンパイルエラーになる。
- x + yの型を`i64`型に変換するか、add関数の戻り値の型を`i32`型変更するかの2つの解決方法がある。

### 数値の型
- ビット長  整数  符号なし整数
- 8ビット  i8  u8
- 16ビット  i16  u16
- 32ビット  i32  u32
- 64ビット  i64  u64
- 処理系依存 isize usize

### 数値のリテラル
- 数値リテラル  例
- 10進数  12_345
- 16進数  0xff
- 8進数  0o77
- 2進数  0b1111_0000
- 1バイト  b'A'


### 参考書籍
- {% include book/book_945.html %} {% comment %} プログラミング言語Rust入門 {% endcomment %}
