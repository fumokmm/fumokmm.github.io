---
chapter_no: 30
chapter_title: 補足説明
created: 2022-11-26
updated: 2022-11-26
---
### どういう状態か？
2の状態は「ローカル変更した状態」で「まだステージングしていない」状態となっています。  
つまり、戻りたい地点でちょっとファイルを編集しただけの状態ということです。  
この状態からの次のアクションとしては、コミットしたいファイルを`add`してステージし、その後コミットする感じです。  

### git merge --squashとの比較
ちなみに、ここで紹介しているやり方は、`git merge --squash`とだいたい同じです。  
やった作業内容を失いたくないので、ひとまず一時的に作ったブランチにコミットを溜め込んでおいて、  
最後にこの手法でコミットしたい場所まで戻って、差分を一つにまとめてコミットする、なんてことができますね。
`git merge --squash`の場合、コミットコメントをいい感じに寄せ集めてくれたりしますが、  
ここで紹介しているやり方のほうが柔軟に`add`し直せるので、便利かなと個人的には感じています。

### なんで最初にworkブランチを作っているのか？
これは、元々コミットしていたブランチで作業してしまうと、そのブランチの`HEAD`位置が`reset`によって書き換えられてしまい、  
元いた位置がわからなくなってしまうため、元いた位置(ブランチ)が消えないようにするために敢えてブランチを作ってから作業しているということです。

もしかすると、元のブランチを再利用したい人は、手順1でブランチを作るのではなく、タグでも付けておくという方法でもいいかもしれません。
```:1の手順はタグでも可
git tag old_commit_point
```

### ステージングした状態で戻りたい場合
2の状態はステージングされていない状態ですので  
仮に、「ステージングはした状態」として戻りたかった場合、以下のように`--mixed`を`--soft`に変えるだけです。  

戻りたい地点を`xyz`とします。
```
$ git reset {em:blue{--soft}em} {em{xyz}em}
```

あまりいい用例を思い浮かばないのですが、例えば
「コミットしたんだけど、コメントをミスったので、直前に戻ってコメントだけ修正して再コミットしたい場合」とかですかね。
いわゆる`git commit --amend`で同じことができたりするものです。(`xyz`の部分は`HEAD^`になるかと思います。)
