---
chapter_no: 12
chapter_group: 基礎文法
chapter_title: 型
created: 2022-10-05
updated: 2022-10-05
---
### 型推論
- Rustの場合は型推論させるのが一般的です。
```:型推論させた変数の使用例
fn main() {
    let name = "fumo";
    let age = 41;
}
```
- 型を宣言しておきたいときは `:` の後に変数の型を書きます。
```:型を宣言
fn main() {
    let name {em{: &str}em} = "fumo";
    let age {em{: i32}em} = 41;
}
```
- 文字列の型は`&str`。
- 数値の場合は主に`i32`を使います。`i32`は整数(integer)の32ビット版です。
- 最近のパソコンでは64ビットが主流なので`i64`でもOKです。
- 変数だけの時は型を指定する必要はありません。(型推論でOK)
- しかし、関数を作成する場合は型の指定が必須になります。

```:関数を作成する場合は型の指定が必須になる
fn add(x: {em{i32}em}, y: {em{i32}em}) -> {em{i32}em} {
    x + y
}
```
- `fn`は関数宣言の印です。
- add関数は引数xと引数yの2つを受け取って、加算して返すという簡単なものです。
- `->`が関数の戻り値です。

- 戻り値の型は関数の中で使われている計算結果の型と一致させなくてはならない。
```:コンパイルエラー
fn add(x: {em{i32}em}, y: {em{i32}em}) -> {em:blue{i64}em} {
    x + y
}
```
- 戻り値の型で指定した`i64`が間違っているためコンパイルエラーになります。
- x + yの型を`i64`型に変換するか、add関数の戻り値の型を`i32`型変更するかの2つの解決方法があります。

### 数値の型
<table class="normal">
	<tr>
		<th markdown="span">ビット長</th>
		<th markdown="span">整数</th>
		<th markdown="span">符号なし整数</th>
	</tr>
	<tr>
		<td markdown="span">8ビット</td>
		<td markdown="span">i8</td>
		<td markdown="span">u8</td>
	</tr>
	<tr>
		<td markdown="span">16ビット</td>
		<td markdown="span">i16</td>
		<td markdown="span">u16</td>
	</tr>
	<tr>
		<td markdown="span">32ビット</td>
		<td markdown="span">i32</td>
		<td markdown="span">u32</td>
	</tr>
	<tr>
		<td markdown="span">64ビット</td>
		<td markdown="span">i64</td>
		<td markdown="span">u64</td>
	</tr>
	<tr>
		<td markdown="span">処理系依存</td>
		<td markdown="span">isize</td>
		<td markdown="span">usize</td>
	</tr>
</table>

### 数値のリテラル
<table class="normal">
	<tr>
		<th markdown="span">数値リテラル</th>
		<th markdown="span">例</th>
	</tr>
	<tr>
		<td markdown="span">10進数</td>
		<td markdown="span">12_345</td>
	</tr>
	<tr>
		<td markdown="span">16進数</td>
		<td markdown="span">0xff</td>
	</tr>
	<tr>
		<td markdown="span">8進数</td>
		<td markdown="span">0o77</td>
	</tr>
	<tr>
		<td markdown="span">2進数</td>
		<td markdown="span">0b1111_0000</td>
	</tr>
	<tr>
		<td markdown="span">1バイト</td>
		<td markdown="span">b'A'</td>
	</tr>
</table>

### 参考書籍
- {% include book/book_945.html %} {% comment %} プログラミング言語Rust入門 {% endcomment %}
