---
chapter_no: 50
chapter_title: 制御フロー
created: 2022-10-07
updated: 2022-10-07
---
### #if、#elseif、#else
`#if`、`#elseif`、`#else`、`#end`は条件分岐するための指示子です。  

```syntax
#if( {em{<条件>}em} )
[ {em:blue{<出力>}em} ]

[ #elseif( {em{<条件2>}em} ) [ {em:blue{<出力2}em}> ] ]
・・
[ #else [ {em:blue{<出力3}em}> ] ]
#end
```
- 条件部分には、`==`、`=`、`>`、`<`、`<=`、`>=`、`!`などの論理演算子の利用が可能です。
- 戻り値が`boolean型`でない場合は`null`以外は`true`と解釈されます。
- 出力部分には`VTL`またはテキストを記述します。

### 例
`#if`、`#else`、`#elseif`を使った例として、人(Human)クラスのオブジェクトのBMI指数(肥満度指数)を測定する例を考えてみます。   Humanクラスはプロパティとして身長(height:単位はメートル)と体重(weight:単位はキログラム)のみを持っているとします。  
まず、vmファイルを以下に示します。

```:bmi.vm
{em{#set($bmi = $human.weight / $human.height / $human.height)}em}
  あなたのBMI指数は $bmi です。
{em{#if($bmi < 20.0)}em}
  やせ気味です。
{em{#elseif($bmi >= 20.0 && $bmi < 25.0)}em}
  標準です。
{em{#elseif($bmi >= 25.0 && $bmi < 40.0)}em}
  肥満です。
{em{#else}em}
  手に負えません。
{em{#end}em}
```

次にBMI.javaでhumanオブジェクトを生成します。

```:BMI.java
(略)
Human human = new Human("1.67", "50");
(略)

try {
    velocityContext vc = new VelocityContext();
    StringWriter writer = new StringWriter();
    vc.put("human", human);
    Template template = Velocity.getTemplate({em{"bmi.vm"}em});
    template.merge(vc, writer);
(略)
```

```output:出力結果
  あなたのBMI指数は 17.93 です。
  やせ気味です。
```
